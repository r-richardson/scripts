# Text-to-Speech Conversion Script

This repository contains a versatile Text-to-Speech (TTS) conversion script that takes a markdown file as input, converts it to plain text, and generates an MP3 audio file using the Mimic 3 Text-to-Speech engine. The script can be tailored to specific needs through parameters and editable variables, including language, voice, speaker, quality of output, and speed of speech.

## Table of Contents

1. [Description](#description)
2. [Prerequisites](#prerequisites)
3. [Usage](#usage)
4. [Parameters](#parameters)
5. [Editable Variables](#editable-variables)
6. [Contribution](#contribution)
7. [Credits](#credits)
8. [License](#license)

## Description

This script has been designed to convert written text from markdown files to audible MP3 files. It carries out the following tasks:

1. Takes a markdown file as input and converts the text to plain text using pandoc.
2. Converts the plain text to speech using the Mimic 3 Text-to-Speech (TTS) engine developed by Mycroft AI.
3. Converts the speech to an MP3 audio file using ffmpeg.
4. If an output path is specified, the script moves the output MP3 file to that location. Temporary files are then removed.

The script was developed and tested on [OpenSuse Tumbleweed](https://get.opensuse.org/tumbleweed/).

## Prerequisites

The script relies on the following software:

- **Pandoc**: A Haskell library for converting from one markup format to another. It is used in this script to convert the input markdown file to plain text.

- **Mimic 3**: A fast, privacy-focused, open-source, neural Text to Speech (TTS) engine developed by Mycroft AI. This engine allows for various customization options such as choosing the voice model, the default speaker for multi-speaker voice models, speaking rate, and adding noise to the generated audio to mask audio artifacts.

- **FFmpeg**: A universal media converter able to read a wide variety of inputs, apply filters, and transcode them into a plethora of output formats. In this script, it is used to convert the speech generated by Mimic 3 into an MP3 file.

- **id**: prints real and effective user and group IDs. In this script, it is used to determine the users home folder for the default output location.

Please ensure these are installed and properly configured on your system before using the script.

## Usage

To use the script, run the following command in the terminal:

```bash
bash tts.sh <input-file.md> <language> <voice> <speaker> <quality> <speed> <filter-code-blocks>
```

Where:
1. `<input-file.md>`: Path to the markdown file you want to convert to speech.
2. `<language>`: The language in which the text should be spoken.
3. `<voice>`: The voice model to use for the TTS engine.
4. `<speaker>`: The default speaker for multi-speaker voice models (optional).
5. `<quality>`: Quality of the output MP3 file (optional, default is 9, where 9 is the lowest quality and 1 is the best quality).
6. `<speed>`: Speed of speech (optional, default is 1, where > 1 is slower, < 1 is faster).
7. `<filter-code-blocks>`: Boolean variable to control whether to filter code blocks (optional, default is true).

## Parameters

The script takes the following parameters:

1. `filename`: Path to the markdown file you want to convert to speech. This parameter is mandatory.
2. `language`: The language in which the text should be spoken. This parameter is mandatory.
3. `voice`: The voice model to use forthe TTS engine. This parameter is mandatory.
4. `speaker`: The default speaker for multi-speaker voice models. This parameter is optional.
5. `quality`: Quality of the output MP3 file (default is 9, where 9 is the lowest quality and 1 is the best quality). This parameter is optional.
6. `speed`: Speed of speech (default is 1, where > 1 is slower, < 1 is faster). This parameter is optional.
7. `filter`-code-blocks: Boolean variable to control whether to filter code blocks (default is true). This parameter is optional.

## Editable Variables

The script includes the following editable variables:

1. `output_path`: The path where the output MP3 files should be stored. If this variable is not set, the script will store the output files in the /tmp directory.
2. `quality`: The quality of the output MP3 file. The default value is 9, where 9 is the lowest quality and 1 is the highest quality.
3. `speed_en` and `speed_de`: The speed of speech for English and German respectively. The default value for both is 1, where > 1 is slower, < 1 is faster.
4. `filter_code_blocks`: A Boolean variable that controls whether code blocks in the input markdown file should be replaced with a skip message. The default value is true.

## Contribution

Contributions are welcome. If you find a bug, please open an issue. If you want to make a change to the code, please fork the repository and make a pull request.

## License

This project uses the following license: [MIT License](../LICENSE).